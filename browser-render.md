
# 浏览器渲染过程及原理


### 五大主流浏览器和四大内核
1. IE浏览器：Trident
2. Chrome浏览器：以前是Webkit，现在是Blink；
3. Firefox浏览器：Gecko
4. Safari浏览器：Webkit；
5. Opera浏览器：Presto（自己的），后来是Webkit，现在是Blink； 

### 浏览器的主要功能
  * 浏览器的主要功能是将用户选择的web资源呈现出来，它需要从服务器请求资源，并将其显示在浏览器窗口中。
  常用资源格式 `HTML`、`PDF`、`XHTML`、`SVG`。。。

### 浏览器的主要构成
1. 用户界面 － 包括地址栏、后退/前进按钮、书签目录等，UI界面。
2. 浏览器引擎 － 用来查询及操作渲染引擎的接口。
3. 渲染引擎 － 用来显示请求的内容，例如，如果请求内容为html，它负责解析html及css，并将解析后的结果显示出来。
4. 网络 － 用来完成网络调用，例如http请求，它具有平台无关的接口，可以在不同平台上工作。
5. UI后端 － 用来绘制类似组合选择框及对话框等基本组件，具有不特定于某个平台的通用接口，底层使用操作系统的用户接口。
6. js解释器 － 用来解释执行JS代码。
7. 数据存储 － 属于持久层，浏览器需要在硬盘中保存类似cookie的各种数据，Html5定义了web database技术，这是一种轻量级完整的客户端存储技术

![浏览器构成](https://pic002.cnblogs.com/images/2011/265173/2011110316262567.png)


## 渲染引擎
> 渲染引擎的职责就是渲染，即在浏览器窗口中显示所请求的内容。默认情况下，渲染引擎可以显示html、xml文档及图片，它也可以借助插件（一种浏览器扩展）显示其他类型数据，例如使用PDF阅读器插件，可以显示PDF格式
 
#### HTML渲染主流程
基本流程: `dom树` -> `构建render树` -> `布局render树` -> `绘制render树`
![渲染流程](https://pic002.cnblogs.com/images/2011/265173/2011110316263715.png)

渲染引擎开始解析html，并将标签转化为内容树中的dom节点。接着，它解析外部CSS文件及style标签中的样式信息。这些样式信息以及html中的可见性指令将被用来构建另一棵树——render树。

Render树由一些包含有颜色和大小等属性的矩形组成，它们将被按照正确的顺序显示到屏幕上。

Render树构建好了之后，将会执行布局过程，它将确定每个节点在屏幕上的确切坐标。再下一步就是绘制，即遍历render树，并使用UI后端层绘制每个节点。

* webkit

![渲染流程](https://pic002.cnblogs.com/images/2011/265173/2011110316264892.png)

* Geoko

![渲染流程](https://pic002.cnblogs.com/images/2011/265173/2011110316270146.jpg)


